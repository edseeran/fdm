{
  "version": 3,
  "sources": ["../../deep-pick-omit/dist/index.mjs", "../../pinia-plugin-persistedstate/dist/index.js"],
  "sourcesContent": ["function get(obj, path) {\n  if (obj == null)\n    return void 0;\n  let value = obj;\n  for (let i = 0; i < path.length; i++) {\n    if (value == null || value[path[i]] == null)\n      return void 0;\n    value = value[path[i]];\n  }\n  return value;\n}\nfunction set(obj, value, path) {\n  if (path.length === 0)\n    return value;\n  const idx = path[0];\n  if (path.length > 1) {\n    value = set(\n      typeof obj !== \"object\" || obj === null || !Object.prototype.hasOwnProperty.call(obj, idx) ? Number.isInteger(Number(path[1])) ? [] : {} : obj[idx],\n      value,\n      Array.prototype.slice.call(path, 1)\n    );\n  }\n  if (Number.isInteger(Number(idx)) && Array.isArray(obj))\n    return obj.slice()[idx];\n  return Object.assign({}, obj, { [idx]: value });\n}\nfunction unset(obj, path) {\n  if (obj == null || path.length === 0)\n    return obj;\n  if (path.length === 1) {\n    if (obj == null)\n      return obj;\n    if (Number.isInteger(path[0]) && Array.isArray(obj))\n      return Array.prototype.slice.call(obj, 0).splice(path[0], 1);\n    const result = {};\n    for (const p in obj)\n      result[p] = obj[p];\n    delete result[path[0]];\n    return result;\n  }\n  if (obj[path[0]] == null) {\n    if (Number.isInteger(path[0]) && Array.isArray(obj))\n      return Array.prototype.concat.call([], obj);\n    const result = {};\n    for (const p in obj)\n      result[p] = obj[p];\n    return result;\n  }\n  return set(\n    obj,\n    unset(\n      obj[path[0]],\n      Array.prototype.slice.call(path, 1)\n    ),\n    [path[0]]\n  );\n}\n\nfunction deepPickUnsafe(obj, paths) {\n  return paths.map((p) => p.split(\".\")).map((p) => [p, get(obj, p)]).filter((t) => !!t[1]).reduce((acc, cur) => set(acc, cur[1], cur[0]), {});\n}\nfunction deepPick(obj, paths) {\n  return deepPickUnsafe(obj, paths);\n}\nfunction deepOmitUnsafe(obj, paths) {\n  return paths.map((p) => p.split(\".\")).reduce((acc, cur) => unset(acc, cur), obj);\n}\nfunction deepOmit(obj, paths) {\n  return deepOmitUnsafe(obj, paths);\n}\n\nexport { deepOmit, deepOmitUnsafe, deepPick, deepPickUnsafe };\n", "// src/index.ts\nimport { destr } from \"destr\";\n\n// src/runtime/core.ts\nimport { deepOmitUnsafe, deepPickUnsafe } from \"deep-pick-omit\";\nfunction hydrateStore(store, {\n  storage,\n  serializer,\n  key,\n  debug,\n  pick,\n  omit,\n  beforeHydrate,\n  afterHydrate\n}, context, runHooks = true) {\n  try {\n    if (runHooks)\n      beforeHydrate?.(context);\n    const fromStorage = storage.getItem(key);\n    if (fromStorage) {\n      const deserialized = serializer.deserialize(fromStorage);\n      const picked = pick ? deepPickUnsafe(deserialized, pick) : deserialized;\n      const omitted = omit ? deepOmitUnsafe(picked, omit) : picked;\n      store.$patch(omitted);\n    }\n    if (runHooks)\n      afterHydrate?.(context);\n  } catch (error) {\n    if (debug)\n      console.error(\"[pinia-plugin-persistedstate]\", error);\n  }\n}\nfunction persistState(state, {\n  storage,\n  serializer,\n  key,\n  debug,\n  pick,\n  omit\n}) {\n  try {\n    const picked = pick ? deepPickUnsafe(state, pick) : state;\n    const omitted = omit ? deepOmitUnsafe(picked, omit) : picked;\n    const toStorage = serializer.serialize(omitted);\n    storage.setItem(key, toStorage);\n  } catch (error) {\n    if (debug)\n      console.error(\"[pinia-plugin-persistedstate]\", error);\n  }\n}\nfunction createPersistence(context, optionsParser) {\n  const { pinia, store, options: { persist } } = context;\n  if (!persist)\n    return;\n  if (!(store.$id in pinia.state.value)) {\n    const originalStore = pinia._s.get(store.$id.replace(\"__hot:\", \"\"));\n    if (originalStore)\n      Promise.resolve().then(() => originalStore.$persist());\n    return;\n  }\n  const persistenceOptions = Array.isArray(persist) ? persist : persist === true ? [{}] : [persist];\n  const persistences = persistenceOptions.map(optionsParser);\n  store.$hydrate = ({ runHooks = true } = {}) => {\n    persistences.forEach((p) => {\n      hydrateStore(store, p, context, runHooks);\n    });\n  };\n  store.$persist = () => {\n    persistences.forEach((p) => {\n      persistState(store.$state, p);\n    });\n  };\n  persistences.forEach((p) => {\n    hydrateStore(store, p, context);\n    store.$subscribe(\n      (_mutation, state) => persistState(state, p),\n      { detached: true }\n    );\n  });\n}\n\n// src/index.ts\nfunction createPersistedState(options = {}) {\n  return function(context) {\n    createPersistence(context, (p) => ({\n      key: (options.key ? options.key : (x) => x)(p.key ?? context.store.$id),\n      debug: p.debug ?? options.debug ?? false,\n      serializer: p.serializer ?? options.serializer ?? {\n        serialize: (data) => JSON.stringify(data),\n        deserialize: (data) => destr(data)\n      },\n      storage: p.storage ?? options.storage ?? window.localStorage,\n      beforeHydrate: p.beforeHydrate,\n      afterHydrate: p.afterHydrate,\n      pick: p.pick,\n      omit: p.omit\n    }));\n  };\n}\nvar src_default = createPersistedState();\nexport {\n  createPersistedState,\n  src_default as default\n};\n"],
  "mappings": "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",
  "names": []
}
